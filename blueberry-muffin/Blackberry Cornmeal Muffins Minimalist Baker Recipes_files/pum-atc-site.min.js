!function(a){"use strict";window.pum_vars=window.pum_vars||{page:0};function i(){return void 0===e&&"undefined"!=typeof MobileDetect&&(e=new MobileDetect(window.navigator.userAgent)),e}var e,r,s=document.referrer,o=PUM.getCookie("pum_alm_pages_viewed")||[],t=parseInt(pum_vars.page)||-1,n=new Date,c=PUM.getCookie("pum_alm_first_activity")||!1,u=PUM.getCookie("pum_alm_last_activity")||n.getTime(),p={ctrl:!1,alt:!1,shift:!1},l=pm_cookie_json("pum_alm_popup_open_counts")||{};if("string"==typeof o&&(o=o.split(",")),o.length)for(var g=0;o.length>g;g++)o[g]=parseInt(o[g].trim());if(0<=t&&-1===o.indexOf(t)&&(o.push(t),a.pm_cookie("pum_alm_pages_viewed",o.join(","),{expires:"90 days"},"/")),(!c||u+3600<n.getTime())&&(c=(c=new Date).getTime(),a.pm_cookie("pum_alm_first_activity",c,{expires:"1 day"},"/")),a.pm_cookie("pum_alm_last_activity",n.getTime(),{expires:"1 day"},"/"),a(document).on("ready keypress scroll click touchstart mousedown mousemove",function(e){n=new Date,a.pm_cookie("pum_alm_last_activity",n.getTime(),{expires:"1 day"},"/")}),"string"==typeof l&&(l=JSON.parse(l)),l.length)for(g=0;l.length>g;g++)l[g]=parseInt(l[g].trim());function f(e){var t,n=!0;try{t=new RegExp(e)}catch(e){n=!1}return n?t:(alert("Invalid regular expression"),!1)}function _(e){return e?e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"):e}function h(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""}:"Chrome"===n[1]&&null!==(e=t.match(/\bOPR\/(\d+)/))?{name:"Opera",version:e[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})}a(document).on("keydown",function(e){16===e.which&&(p.shift=!0),17===e.which&&(p.ctrl=!0),18===e.which&&(p.alt=!0)}).on("keyup",function(e){16===e.which&&(p.shift=!1),17===e.which&&(p.ctrl=!1),18===e.which&&(p.alt=!1)}).on("pumAfterOpen",".pum",function(){!function(e){void 0===l[e]&&(l[e]=0),l[e]++,a.pm_cookie("pum_alm_popup_open_counts",JSON.stringify(l),{expires:"90 days"},"/")}(PUM.getSetting(this,"id"))}),r=function(e){var t={},n=e||document.location.search;if(""===n)return t;for(n=n.replace(/(^\?)/,"").replace(/;/g,"&");-1!==n.indexOf("&&");)n=n.replace(/&&/g,"&");function r(e){return decodeURIComponent(e)}n=(n=n.replace(/([\&]+$)/,"")).split("&");for(var i=0;i<n.length;i++){var s=n[i].split("=");if(void 0!==t[(s=a.map(s,r))[0]])if("string"==typeof t[s[0]]){var o=t[s[0]];""===s[1]&&(s[1]=null),t[s[0]]=[],t[s[0]].push(o),t[s[0]].push(s[1])}else"object"==typeof t[s[0]]&&(""===s[1]&&(s[1]=null),t[s[0]].push(s[1]));else""===s[1]&&(s[1]=null),t[s[0]]=s[1]}return t}(),a.extend(a.fn.popmake.conditions,{popup_views:function(e){var t=parseInt(e.settings.selected)||!1,n=parseFloat(e.settings.morethan)||!1,r=parseFloat(e.settings.lessthan)||!1,i=parseInt(l[t])||0;return!!t&&(n&&!r?n<i:r&&!n?i<r:!(!r||!n)&&(i<r&&n<i))},url_is:function(e){var t=e.settings.search||!1,n=new RegExp("^"+_(t)+"$")||!1,r=document.location.toString();return!t||n.test(r)},url_contains:function(e){var t=e.settings.search||!1,n=new RegExp(_(t))||!1,r=document.location.toString();return!t||n.test(r)},url_begins_with:function(e){var t=e.settings.search||!1,n=new RegExp("^"+_(t)),r=document.location.toString();return!t||n.test(r)},url_ends_with:function(e){var t=e.settings.search||!1,n=new RegExp(_(t)+"$"),r=document.location.toString();return!t||n.test(r)},url_regex:function(e){var t=e.settings.search||!1,n=f(t),r=document.location.toString();return!t||!!n&&n.test(r)},query_arg_exists:function(e){var t=e.settings.arg_name||!1;return!!t&&t in r},query_arg_is:function(e){var t=e.settings.arg_name||!1,n=e.settings.arg_value||!1;return!!t&&(void 0!==r[t]&&r[t]===n)},browser_is:function(e){var t,n,r=e.settings.selected||[];for(t=0;r.length>t;t++)if("Internet Explorer"===(n=r[t])&&(n="IE"),n===h().name||i().is(n))return!0;return!1},browser_version:function(e){var t=parseFloat(e.settings.morethan)||!1,n=parseFloat(e.settings.lessthan)||!1,r=parseFloat(h().version);return t&&!n?t<r:n&&!t?r<n:!(!n||!t)&&(r<n&&t<r)},browser_width:function(e){var t=window.innerWidth,n=parseFloat(e.settings.morethan)||!1,r=parseFloat(e.settings.lessthan)||!1;return n&&!r?n<t:r&&!n?t<r:r&&n?t<r&&n<t:!r&&!n},browser_height:function(e){var t=window.innerHeight,n=parseFloat(e.settings.morethan)||!1,r=parseFloat(e.settings.lessthan)||!1;return n&&!r?n<t:r&&!n?t<r:r&&n?t<r&&n<t:!r&&!n},html_element_exists:function(e){var t=e.settings.selector||"";return 0<a(t).length},html_element_has_class:function(e){var t=e.settings.selector||"",n=e.settings.class||"";return 0<a(t).filter("."+n).length},html_element_on_screen:function(e){var t=e.settings.selector||"",n=a(t),r=void 0!==e.settings.entirely&&e.settings.entirely;return!!n.length&&function(e,t){var n=a(window).scrollTop(),r=n+a(window).height(),i=e.offset().top,s=i+e.height();return(t=t||!1)?n<i&&s<r:n<=i&&i<=r||n<=s&&s<=r}(n,r)},device_is_mobile:function(){return i().mobile()},device_is_phone:function(){return i().phone()},device_is_tablet:function(){return i().tablet()},device_is_brand:function(e){var t,n=e.settings.selected||[];for(t=0;n.length>t;t++)if(i().is(n[t]))return!0;return!1},device_screen_width:function(e){var t=window.screen.width,n=parseFloat(e.settings.morethan)||!1,r=parseFloat(e.settings.lessthan)||!1;return n&&!r?n<t:r&&!n?t<r:r&&n?t<r&&n<t:!r&&!n},device_screen_height:function(e){var t=window.screen.height,n=parseFloat(e.settings.morethan)||!1,r=parseFloat(e.settings.lessthan)||!1;return n&&!r?n<t:r&&!n?t<r:r&&n?t<r&&n<t:!r&&!n},referrer_is:function(e){var t=e.settings.search||!1,n=new RegExp("^"+_(t)+"$")||!1;return!t||n.test(s)},referrer_contains:function(e){var t=e.settings.search||!1,n=new RegExp(_(t))||!1;return!t||n.test(s)},referrer_begins_with:function(e){var t=e.settings.search||!1,n=new RegExp("^"+_(t));return!t||n.test(s)},referrer_ends_with:function(e){var t=e.settings.search||!1,n=new RegExp(_(t)+"$");return!t||n.test(s)},referrer_regex:function(e){var t=e.settings.search||!1,n=f(t);return!t||!!n&&n.test(s)},referrer_is_search_engine:function(e){var t=e.settings.search||[];return"string"!=typeof t&&(t=t.join("|")),f(t).test(s)},referrer_is_external:function(){return""!==s&&-1===s.indexOf(location.protocol+"//"+location.host)},cookie_exists:function(e){var t=e.settings.cookie_name||!1;return!!t&&void 0!==a.fn.popmake.cookie.process(t)},cookie_is:function(e){var t=e.settings.cookie_name||!1,n=e.settings.cookie_value||!1;return!!t&&(void 0!==a.fn.popmake.cookie.process(t)&&a.fn.popmake.cookie.process(t)===n)},page_views:function(e){var t=PUM.getPopup(this),n="pum_popup_"+PUM.getSetting(t,"id")+"_page_views",r=parseInt(PUM.getCookie(n))||0,i=parseFloat(e.settings.morethan)||!1,s=parseFloat(e.settings.lessthan)||!1;return"number"!=typeof r&&(r=0),r++,a.pm_cookie(n,r,{expires:"1 day"},"/"),i&&!s?i<r:s&&!i?r<s:s&&i?r<s&&i<r:!s&&!i},time_on_site:function(e){var t,n=new Date,r=parseFloat(e.settings.morethan)||!1,i=parseFloat(e.settings.lessthan)||!1;return t=n.getTime()-c,r&&!i?60*r*1e3<t:i&&!r?t<60*i*1e3:i&&r?t<60*i*1e3&&60*r*1e3<t:!i&&!r},has_viewed_page:function(e){var t=e.settings.selected||[];if("string"==typeof t&&(t=t.split(",")),t.length)for(var n=0;t.length>n;n++){var r=parseInt(t[n].trim());if(0<=r&&-1===o.indexOf(r))return!1}return!0},holding_ctrl:function(e){return p.ctrl},holding_shift:function(e){return p.shift},holding_alt:function(e){return p.alt},js_function:function(e){return void 0!==e.settings.function_name&&"function"==typeof window[e.settings.function_name]&&window[e.settings.function_name]()}})}(jQuery);